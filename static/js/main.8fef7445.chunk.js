(this["webpackJsonpdiagnal-play"]=this["webpackJsonpdiagnal-play"]||[]).push([[0],{17:function(e,t,n){e.exports=n(35)},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(6),l=n.n(r),s=n(1),o="".concat("/diagnal-play"),u="".concat(o,"/slices/placeholder_for_missing_posters.png"),i="https://gist.githubusercontent.com/KrishnaSharmaCC/34b098f4e07af56c6e9ad2f88cb9454a/raw/a333b24f9d448d1de7a37fc5abd91996c837bf2d",d=n(2);var m="FEED_ITEMS",v="SEARCH_RESULTS",f="SEARCH",h=(n(28),function(e){var t=e.value,n=e.onChange,r=e.searchFocused,l=Object(a.useRef)(null),s=function(e,t){var n=null===e||void 0===e?void 0:e.current;(null===n||void 0===n?void 0:n.classList)&&(t?(n.classList.add("show"),n.focus(),r(!0)):(n.classList.remove("show"),r(!1)))};Object(a.useEffect)((function(){t&&function(e){(null===l||void 0===l?void 0:l.current)&&(l.current.value=e,s(l,!0))}(t)}),[t]);return c.a.createElement("div",{className:"search",onMouseLeave:function(){var e,t,n;!(null===l||void 0===l||null===(e=l.current)||void 0===e||null===(t=e.value)||void 0===t||null===(n=t.trim())||void 0===n?void 0:n.length)&&s(l,!1)}},c.a.createElement("div",{className:"searchInputWrapper"},c.a.createElement("input",{id:"search",name:"search",type:"text",autoComplete:"off",placeholder:"What're you looking for?",className:"searchInput",onChange:function(e){return n(e.target.value)},ref:l}),c.a.createElement("img",{className:"search",src:"".concat(o,"/slices/search.png"),alt:"Search-icon",onClick:function(){return s(l,!0)}})))});n(29);var g=function(){var e=Object(a.useRef)(null),t=Object(s.c)((function(e){return e.data.searchText})),n=Object(s.c)((function(e){return e.data.currentPageTitle})),r=Object(s.b)(),l=function(e,t){var n=Object(a.useRef)(),c=Object(a.useRef)();function r(){c.current&&clearTimeout(c.current)}return Object(a.useEffect)((function(){return r}),[]),function(){for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];n.current=l,r(),c.current=setTimeout((function(){n.current&&e.apply(void 0,Object(d.a)(n.current))}),t)}}((function(e){r({type:f,data:{searchText:e}})}),500);return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header-items"},c.a.createElement("div",{className:"static",ref:e},c.a.createElement("img",{className:"backButton",src:"".concat(o,"/slices/Back.png"),alt:""}),c.a.createElement("p",{className:"currentPageTitle",onClick:function(){return document.fullscreenElement?void(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()):function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}()}},n)),c.a.createElement(h,{value:t,onChange:l,searchFocused:function(t){return function(e,t){var n=e.current;if(null===n||void 0===n?void 0:n.classList){if(t)return void n.classList.add("hide");n.classList.remove("hide")}}(e,t)}})))},E=(n(30),function(e){return c.a.createElement("div",{className:"layout"},c.a.createElement(g,null),c.a.createElement("div",{className:"layout-wrapper"},e.children))}),b=n(12),p=n.n(b),O=n(15),j=n(8),N=n(16),w=(n(32),function(e){var t=e.imgUrl,n=e.name,r=e.loaded,l=void 0===r||r,s=Object(a.useState)(l),o=Object(j.a)(s,2),i=o[0],d=o[1];Object(a.useEffect)((function(){setTimeout((function(){d(!1)}),1500)}),[]);var m=Object(a.useRef)(null);return i?c.a.createElement("div",{className:"skelton"},c.a.createElement("div",{className:"image pulse"}),c.a.createElement("div",{className:"text pulse"})):c.a.createElement("div",{className:"playCard"},c.a.createElement("div",{className:"playCardImageContainer"},c.a.createElement("img",{src:t,alt:n,className:"playCardImage",onError:function(e){return function(e){var t=null===m||void 0===m?void 0:m.current;t&&(t.src=u)}()},ref:m})),c.a.createElement("p",{className:"playCardName",title:n},n))}),R=(Object(a.memo)((function(e){var t=e.imgUrl,n=e.name,r=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=null===r||void 0===r?void 0:r.current;t?(e.classList.remove("loading"),e.style.background="url(".concat(t,") no-repeat center /cover")):e.classList.add("loading")}),[t]),c.a.createElement("div",{className:"skelton lines"},c.a.createElement("div",{className:"image pulse",ref:r}),n&&t?c.a.createElement("div",{style:{color:"white",marginRight:"auto"}},n):c.a.createElement("div",{className:"text pulse"}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return y("".concat(i,"/diagnal-list-").concat(e,".json")).then((function(e){return null===e||void 0===e?void 0:e.page}))}),y=function(e,t){return fetch(e,t).then((function(e){return e.json()}))},T=(n(33),function(){var e=Object(s.c)((function(e){var t=e.data;return null===t||void 0===t?void 0:t.assets})),t=Object(s.b)(),n=Object(a.useState)(1),r=Object(j.a)(n,2),l=r[0],u=r[1],i=Object(s.c)((function(e){var t=e.data;return null===t||void 0===t?void 0:t.searchText}));Object(a.useEffect)((function(){f(l)}),[]),Object(a.useEffect)((function(){i&&h(null===e||void 0===e?void 0:e.list)}),[i]);var f=function(){var n=Object(O.a)(p.a.mark((function n(a){var c,r,l,s,o;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,R(a);case 2:c=n.sent,r=null===c||void 0===c?void 0:c.title,l=null===c||void 0===c?void 0:c["total-content-items"],c&&(o=null===c||void 0===c||null===(s=c["content-items"])||void 0===s?void 0:s.content,i&&h([].concat(Object(d.a)(e.list),Object(d.a)(o))),t({type:m,data:{currentPage:a,total:l,list:o,currentPageTitle:r}}));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),h=function(e){var n=g(e,i);t({type:v,data:{currentPage:l,searchResults:n}})},g=function(e,t){return null===e||void 0===e?void 0:e.filter((function(e){return String(e.name).toLowerCase().includes(String(t).toLowerCase())}))},E=Object(a.useMemo)((function(){return null===e||void 0===e?void 0:e[i?"searchResults":"list"]}),[null===e||void 0===e?void 0:e.searchResults,null===e||void 0===e?void 0:e.list,i]);return c.a.createElement("div",{className:"listingPage"},(null===E||void 0===E?void 0:E.length)?c.a.createElement(N.a,{dataLength:null===E||void 0===E?void 0:E.length,next:function(){l+1<=3&&(u((function(e){return e+1})),f(l+1))},hasMore:!!i||+e.total>e.list.length,scrollThreshold:.6,scrollableTarget:"scrollable"},c.a.createElement("div",{className:"listings",id:"scrollable",style:{height:"calc(100vh - 100px)",overflow:"auto"}},null===E||void 0===E?void 0:E.map((function(e,t){return c.a.createElement(w,{imgUrl:"".concat(o,"/slices/").concat(e["poster-image"]),name:e.name,key:t})})))):i&&c.a.createElement("h1",{className:"noResults"},"No results found.."))}),x=n(3),S=n(4),C={searchText:"",currentPageTitle:"",assets:{currentPage:1,total:0,list:[],searchResults:[]}},F=Object(S.b)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case m:return Object(x.a)({},e,{currentPageTitle:a.currentPageTitle,assets:Object(x.a)({},e.assets,{currentPage:a.currentPage,total:a.total,list:[].concat(Object(d.a)(e.assets.list),Object(d.a)(a.list))})});case v:return Object(x.a)({},e,{assets:Object(x.a)({},e.assets,{currentPage:a.currentPage,searchResults:Object(d.a)(a.searchResults)})});case f:return Object(x.a)({},e,{searchText:a.searchText});default:return e}}}),k=Object(S.c)(F,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var _=function(){return c.a.createElement(s.a,{store:k},c.a.createElement("div",{className:"App"},c.a.createElement(E,null,c.a.createElement(T,null))))};n(34),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.8fef7445.chunk.js.map